# Проект "Orbitron-AI": Пълна Документация

**Версия:** 1.0 (след преструктуриране)
**Дата:** 14 септември 2025

## 1. Концепция и Цел

**Orbitron-AI** е автоматизирана система за пазарен анализ на крипто активи.

* **Основна Цел:** Проследяване на дейността на т.нар. **"Smart Money"** (умни пари) – институционални инвеститори, "китове" и други големи пазарни участници, чиито действия често предшестват големи ценови движения.
* **Метод на Анализ:** Системата се базира на **четири основни стълба**, като събира и анализира данни от всеки от тях, за да изгради цялостна картина на пазара:
    1.  **Фундаментален Анализ:** Търсене на катализатори (икономически новини, регулации, ъпгрейди).
    2.  **Технически Анализ:** Анализ на пазарната структура (цена, обем, индикатори).
    3.  **Анализ на Веригата и Пазара:** Директно проследяване на паричните потоци (транзакции на китове, потоци към борси).
    4.  **Анализ на Настроенията:** Разчитане на пазарния наратив и психология чрез новини и социални мрежи.
* **Краен Продукт:** Интерактивно табло за управление (Dashboard), което представя обобщен AI анализ за ключови активи, идентифицирайки потенциални възможности и рискове.

---

## 2. Архитектура и Файлова Структура

Проектът следва модерна, модулна структура за лесна поддръжка и надграждане.

```
Orbitron-Refactored/
├── .env                       # Секретни API ключове (НИКОГА в Git)
├── .gitignore                 # Игнорирани файлове и папки
├── config.py                  # Глобални, НЕ-секретни настройки
├── requirements.txt           # Списък с Python библиотеки
├── README.md                  # Този файл
│
├── data/                      # Локални данни (база данни, извън Git)
│   └── orbitron_db.sqlite
│
├── scripts/                   # Скриптове за изпълнение на задачи
│   ├── init_db.py             # За създаване на базата данни
│   └── run_pipeline.py        # За стартиране на целия процес
│
├── src/                       # Основният код на приложението
│   ├── analysis/              # Модули за анализ на данни
│   │   └── ai_analyzer.py
│   ├── dashboard/             # Код за таблото за управление
│   │   └── app.py
│   ├── data_ingestion/        # Модули за събиране на данни от API-та
│   │   ├── coingecko_client.py
│   │   ├── newsapi_client.py
│   │   └── rss_client.py
│   ├── database/              # Управление на базата данни
│   │   └── database_manager.py
│   └── utils/                 # Помощни функции (бъдещи)
│
└── tests/                     # Тестове на кода (бъдещи)
```

---

## 3. Работен Поток (Data Flow)

Данните преминават през системата в следната последователност:

**Събиране -> База Данни -> Анализ -> База Данни -> Визуализация**

1.  **Стартиране:** Потребителят изпълнява `scripts/run_pipeline.py`.
2.  **Събиране на Данни (`data_ingestion`):** Модулите се свързват с RSS, NewsAPI и CoinGecko и изтеглят сурова информация (новини, пазарни данни).
3.  **Първично Съхранение:** `DatabaseManager` записва суровите данни в `.sqlite` базата данни.
4.  **AI Анализ (`analysis`):** `AIAnalyzer` извлича необработените новини от базата данни, подава ги на Ollama за анализ (sentiment, summary и т.н.).
5.  **Актуализация:** `DatabaseManager` записва резултатите от AI анализа обратно в съответните редове в базата данни.
6.  **Визуализация (`dashboard`):** Когато потребителят стартира `streamlit run src/dashboard/app.py`, приложението използва `DatabaseManager`, за да извлече вече обработените данни и да ги покаже в интерактивен вид.

---

## 4. Разбивка на Ключовите Модули

* **Конфигурация (`.env`, `config.py`):**
    * `.env`: Съдържа секретни API ключове във формат `KEY="VALUE"`. Този файл е **локален** и се игнорира от Git.
    * `config.py`: Зарежда ключовете от `.env` и ги прави достъпни за останалата част от приложението. Съдържа и други общи настройки (име на модела, списък с активи).

* **База Данни (`src/database/database_manager.py`):**
    * Дефиниран е клас `DatabaseManager`, който управлява цялата комуникация с `.sqlite` файла.
    * Той е отговорен за създаването на таблици, записването на данни и извличането им. Всички други модули комуникират с базата данни **само** чрез този клас.

* **Събиране на Данни (`src/data_ingestion/`):**
    * Всеки файл (`..._client.py`) е клас, отговорен за комуникацията с едно конкретно API (NewsAPI, CoinGecko) или източник (RSS).
    * Тези класове извличат данните и ги връщат в стандартизиран формат (списък от речници).

* **AI Анализ (`src/analysis/ai_analyzer.py`):**
    * Класът `AIAnalyzer` съдържа логиката за комуникация с локалния Ollama модел.
    * Той конструира промпт, изпраща го на модела и обработва отговора в структуриран `JSON` формат.

* **Скриптове за Изпълнение (`scripts/`):**
    * Това са "диригентите" на проекта. `run_pipeline.py` е главният скрипт, който инициализира всички класове и извиква техните методи в правилния ред.

---

## 5. Инструкции за Инсталация и Стартиране

1.  **Клонирайте/Копирайте** папката на проекта.
2.  **Създайте `.env` файл** в основната директория и добавете вашите API ключове.
3.  **Създайте и активирайте виртуална среда:**
    ```bash
    # Създаване
    python3 -m venv venv
    # Активиране
    source venv/bin/activate
    ```
4.  **Инсталирайте нужните библиотеки:**
    ```bash
    pip install -r requirements.txt
    ```
5.  **Инициализирайте базата данни (прави се само веднъж):**
    ```bash
    python scripts/init_db.py
    ```
6.  **Стартирайте основния процес за събиране на данни:**
    ```bash
    python scripts/run_pipeline.py
    ```
7.  **Стартирайте таблото за управление:**
    ```bash
    streamlit run src/dashboard/app.py
    ```

---

## 6. План за Бъдещо Развитие (Roadmap)

* [ ] Автоматизиране на стартирането на таблото за управление.
* [ ] Разширяване и филтриране на източниците на данни.
* [ ] Изграждане на модулите за технически и фундаментален анализ (`src/analysis/`).
* [ ] Оптимизация на таблото с обобщен AI анализ за всеки актив.
* [ ] Разработване на модул за симулация на търговия (`src/trading/`).

---
## ❗ Важна Бележка: Управление на Ollama Ъпдейти

Автоматичните актуализации на Ollama са **спрямо деактивирани**. За инструкции как да ги управлявате, вижте бележката в `README.md` файла.